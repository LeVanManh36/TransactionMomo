<!-- HEADER MOBILE-->
<header class="header-mobile d-block d-lg-none hidden">
    <div class="header-mobile__bar">
        <div class="container-fluid">
            <div class="header-mobile-inner">
                <a class="logo" href="index.html">
                    <img src="images/logo/logo.png" alt="logo"/>
                </a>
                <button class="hamburger hamburger--slider" type="button">
                    <span class="hamburger-box">
                        <span class="hamburger-inner"></span>
                    </span>
                </button>
            </div>
        </div>
    </div>
    <nav class="navbar-mobile">
        <div class="container-fluid">
            <ul class="navbar-mobile__list list-unstyled">
                <li ng-if="authUser.role == 'root'">
                    <a ui-sref="home.accounts" ui-sref-opts="{reload: true}">
                        <i class="fas fa-address-card"></i>{{ 'Sidebar.accounts' | translate }}
                    </a>
                </li>

                <li ng-if="isRoleAdmin">
                    <a ui-sref="home.users" ui-sref-opts="{reload: true}">
                        <i class="fas fa-address-card"></i>{{ 'Sidebar.accounts' | translate }}
                    </a>
                </li>

                <li ng-if="authUser.role == 'admin'">
                    <a ui-sref="home.areas" ui-sref-opts="{reload: true}">
                        <i class="fa fa-map-marker"></i>{{ 'Sidebar.areas' | translate }}
                    </a>
                </li>

                <!--<li ng-if="isRoleAdmin">
                    <a ui-sref="home.settings" ui-sref-opts="{reload: true}">
                        <i class="fas fa-cog"></i>{{ 'Sidebar.settings' | translate }}
                    </a>
                </li>-->

                <li class="hidden">
                    <a href="#">
                        <i class="zmdi zmdi-account"></i>{{ 'Toolbar.profile' | translate }}
                    </a>
                </li>

                <li>
                    <a ui-sref="home.changePw">
                        <i class="zmdi zmdi-settings"></i>{{ 'Toolbar.changePassword' | translate }}
                    </a>
                </li>

                <li>
                    <a ui-sref="login">
                        <i class="zmdi zmdi-power"></i>{{ 'Toolbar.logout' | translate }}
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<!-- END HEADER MOBILE-->

<!-- MENU SIDEBAR-->
<aside class="menu-sidebar d-none d-lg-block">
    <div class="logo">
        <a href="#">
            <img src="images/logo/logo.png" alt="logo"/>
        </a>
    </div>
    <div class="menu-sidebar__content js-scrollbar1">
        <nav class="navbar-sidebar">
            <ul class="list-unstyled navbar__list">
                <li ng-if="authUser.role == 'root'">
                    <a ui-sref="home.accounts" ui-sref-opts="{reload: true}">
                        <i class="fas fa-address-card"></i>{{ 'Sidebar.accounts' | translate }}
                    </a>
                </li>

                <li ng-if="isRoleAdmin">
                    <a ui-sref="home.users" ui-sref-opts="{reload: true}">
                        <i class="fas fa-address-card"></i>{{ 'Sidebar.accounts' | translate }}
                    </a>
                </li>

                <li ng-if="isRoleAdmin">
                    <a ui-sref="home.users_disabled" ui-sref-opts="{reload: true}">
                        <i class="fas fa-address-card"></i>{{ 'Sidebar.accounts_disabled' | translate }}
                    </a>
                </li>

                <li ng-if="['admin'].indexOf(authUser.role) > -1">
                    <a ui-sref="home.areas" ui-sref-opts="{reload: true}">
                        <i class="fa fa-map-marker"></i>{{ 'Sidebar.areas' | translate }}
                    </a>
                </li>

                <!--<li ng-if="isRoleAdmin">
                    <a ui-sref="home.settings" ui-sref-opts="{reload: true}">
                        <i class="fas fa-cog"></i>{{ 'Sidebar.settings' | translate }}
                    </a>
                </li>-->
            </ul>
        </nav>
    </div>
</aside>

<!-- END MENU SIDEBAR-->
<div class="page-container">
    <!-- HEADER DESKTOP-->
    <header class="header-desktop">
        <div class="section__content">
            <div class="container-fluid">
                <div class="header-wrap">
                    <div class="form-header dropdown">
                        <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-language"></i> {{ 'Button.language' | translate }}
                        </button>

                        <ul class="dropdown-menu">
                            <li class="item">
                                <a ng-click="changeLanguage('en')">
                                    <i class="flag-icon flag-icon-us"></i> {{ 'Common.languages.en' | translate }}
                                </a>
                            </li>
                            <li class="item">
                                <a ng-click="changeLanguage('ja')">
                                    <i class="flag-icon flag-icon-jp"></i> {{ 'Common.languages.ja' | translate }}
                                </a>
                            </li>
                            <li class="item">
                                <a ng-click="changeLanguage('vi')">
                                    <i class="flag-icon flag-icon-vn"></i> {{ 'Common.languages.vi' | translate }}
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class="header-button">
                        <div class="account-item clearfix js-item-menu">
                            <div class="image">
                                <img src="images/avatar/02.png" alt="avatar"/>
                            </div>

                            <div class="content">
                                <a class="js-acc-btn">{{ authUser.name ? authUser.name : 'admin' }}</a>
                            </div>

                            <div class="account-dropdown js-dropdown">
                                <div class="info clearfix">
                                    <div class="image">
                                        <img src="images/avatar/02.png" alt="avatar"/>
                                    </div>

                                    <div class="content">
                                        <h5 class="name">{{ authUser.name ? authUser.name : 'admin' }}</h5>
                                        <span class="email">
                                            {{ authUser.name ? authUser.email : 'admin@mqsolutions.vn' }}
                                        </span>
                                    </div>
                                </div>

                                <div class="account-dropdown__body">
                                    <div class="account-dropdown__item hidden">
                                        <a href="#">
                                            <i class="zmdi zmdi-account"></i>{{ 'Toolbar.profile' | translate }}
                                        </a>
                                    </div>

                                    <div class="account-dropdown__item">
                                        <a ui-sref="home.changePw">
                                            <i class="zmdi zmdi-settings"></i>{{ 'Toolbar.changePassword' | translate }}
                                        </a>
                                    </div>
                                </div>

                                <div class="account-dropdown__footer">
                                    <a ui-sref="login">
                                        <i class="zmdi zmdi-power"></i>{{ 'Toolbar.logout' | translate }}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- HEADER DESKTOP-->

    <div ui-view="main" autoscroll="false" class="main-content overflow-hidden">

    </div>
</div>
<script>
  (function ($) {
    // USE STRICT
    "use strict";

    const mobile_screen_width = 768;
    if (screen.width <= mobile_screen_width) {
      displayHeaderMobile()
      displayHeaderDesktop()
    }

    function displayHeaderMobile() {
      $('.header-mobile').toggleClass('hidden');
    }

    function displayHeaderDesktop() {
      $('.header-desktop').toggleClass('hidden');
      $('.menu-sidebar').toggleClass('hidden');
    }

    let menu = $('.js-item-menu');
    let sub_menu_is_showed = -1;
    // Dropdown
    try {
      for (let i = 0; i < menu.length; i++) {
        $(menu[i]).on('click', function (e) {
          e.preventDefault();
          $('.js-right-sidebar').removeClass("show-sidebar");
          if (jQuery.inArray(this, menu) == sub_menu_is_showed) {
            $(this).toggleClass('show-dropdown');
            sub_menu_is_showed = -1;
          } else {
            for (let i = 0; i < menu.length; i++) {
              $(menu[i]).removeClass("show-dropdown");
            }
            $(this).toggleClass('show-dropdown');
            sub_menu_is_showed = jQuery.inArray(this, menu);
          }
        });
      }

      $(".js-item-menu, .js-dropdown").click(function (event) {
        event.stopPropagation();
      });

      $("body,html").on("click", function () {
        for (let i = 0; i < menu.length; i++) {
          menu[i].classList.remove("show-dropdown");
        }
        sub_menu_is_showed = -1;
      });

    } catch (error) {
      console.log(error);
    }

    // Right Sidebar
    let right_sidebar = $('.js-right-sidebar');
    let sidebar_btn = $('.js-sidebar-btn');

    sidebar_btn.on('click', function (e) {
      e.preventDefault();
      for (let i = 0; i < menu.length; i++) {
        menu[i].classList.remove("show-dropdown");
      }
      sub_menu_is_showed = -1;
      right_sidebar.toggleClass("show-sidebar");
    });

    $(".js-right-sidebar, .js-sidebar-btn").click(function (event) {
      event.stopPropagation();
    });

    $("body, html").on("click", function () {
      right_sidebar.removeClass("show-sidebar");
    });

    // Sublist Sidebar
    try {
      let arrow = $('.js-arrow');
      arrow.each(function () {
        let that = $(this);
        that.on('click', function (e) {
          e.preventDefault();
          that.find(".arrow").toggleClass("up");
          that.toggleClass("open");
          that.parent().find('.js-sub-list').slideToggle("250");
        });
      });

    } catch (error) {
      console.log(error);
    }

    try {
      // Hamburger Menu
      $('.hamburger').on('click', function () {
        $(this).toggleClass('is-active');
        $('.navbar-mobile').slideToggle('500');
      });
      $('.navbar-mobile__list li.has-dropdown > a').on('click', function () {
        let dropdown = $(this).siblings('ul.navbar-mobile__dropdown');
        $(this).toggleClass('active');
        $(dropdown).slideToggle('500');
        return false;
      });
    } catch (error) {
      console.log(error);
    }

    $('.account-dropdown__footer, .account-dropdown__body').on('click', 'a', function () {
      $('.account-item').removeClass('show-dropdown');
    });

    $('.account-dropdown__footer').on('click', 'a', function () {
      localStorage.removeItem('ngStorage-currentUser');
    });

  })(jQuery);
</script>
